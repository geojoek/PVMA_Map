<html lang="en">

<head>
    <title>Glacial Lake Hitchcock Layers</title>
    <link rel="stylesheet" href="css/leaflet.css" />
    <script src="js/leaflet.js"></script>
    <style>
        #map {
            height: 100%
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <!--pre-loads the GeoJSON layers: This is probably not the best idea, performance-wise. Will investigate Tangram and other options-->
    <!--Loading in order of smallest to largest file size-->
    <!--Each layer is defined as variable within the geojson file-->
    <script src="geoJSON_bigger_map/json_195_bigger.js"></script>
    <script src="geoJSON_bigger_map/json_179_bigger.js"></script>
    <script src="geoJSON_bigger_map/json_172_bigger.js"></script>
    <script src="geoJSON_bigger_map/json_156_bigger.js"></script>

    <script>
        // initialize the map
        var map = L.map('map');

        //Topographic Base
        var topobase = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.{ext}', {
            attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map GeoJSON &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            subdomains: 'abcd',
            minZoom: 7,
            maxZoom: 18,
            ext: 'png'
        });

        // putting all the styling into one function to keep code short as possible
        function HitchcockStyle(feature) {
            switch (feature.properties['Type']) {
                case 'glacier':
                    return {
                        fillColor: '#dadfd6',
                        opacity: '0.0',
                        fillOpacity: '1.0',
                    };
                    break;

                case 'lake':
                    return {
                        fillColor: '#1f93b4',
                        opacity: '0.0',
                        fillOpacity: '1.0',
                    };
                    break;
            }
        }

        // Defining the glacier and lake layers
        // Variables that are called upon here are defined in the geojson files themselves
        var layer195 = new L.geoJson(json_195_bigger, {
            style: HitchcockStyle
        });

        var layer179 = new L.geoJson(json_179_bigger, {
            style: HitchcockStyle
        });

        var layer172 = new L.geoJson(json_172_bigger, {
            style: HitchcockStyle
        });

        var layer156 = new L.geoJson(json_156_bigger, {
            style: HitchcockStyle
        });

        topobase.addTo(map);
        map.setView([42.276210, -72.590577], 9);
        // layer156.addTo(map);

        var baseMaps = {
            "15,600 years ago<br>Rocky Hill Dam breached<br>Local topography starts to rebound<br>Lake level unstable": layer156,
            "17,200 years ago<br>Stable Lake Level": layer172,
            "17,900 years ago<br>Highest Lake Level": layer179,
            "19,500 years ago": layer195
        };

        L.control.layers(baseMaps).addTo(map);
    </script>
</body>

</html>